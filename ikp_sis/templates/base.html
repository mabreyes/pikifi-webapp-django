{% load static %}
<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="">

    <!-- Bootstrap core CSS -->
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'font-awesome-4.7.0/css/font-awesome.min.css' %}" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/jquery.dataTables.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/buttons.dataTables.min.css' %}">


</head>

<body>
    <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-success">
        <div class="container">
            <a class="navbar-brand" href="/">Philippine Island Kids International Foundation, Inc. Database</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse"
                aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarCollapse">
                <ul class="navbar-nav mr-auto">
                </ul>
                {% if user.is_authenticated %}
                <div class="dropdown show">
                    <a class="btn btn-primary btn-success dropdown-toggle" href="#" role="button" id="dropdownMenuLink"
                        style="background-color: #1e7e34; border-color: #1c7430;" data-toggle="dropdown"
                        aria-haspopup="true" aria-expanded="false">
                        Signed in as <strong>{{ user }}</strong>
                    </a>

                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                        <a class="dropdown-item" href="{% url 'change_password' %}">Settings</a>
                        <a class="dropdown-item" href="/accounts/logout/?next={% url 'signout' %}">Sign Out</a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <main role="main" class="container" style="margin-top: 5em;">
        {% block content %} {% endblock %}
    </main>

    <footer class="container" style="margin-top: 3em; margin-bottom: 3em;">
        &copy; 2019 Philippine Island Kids International Foundation Database. Developed by <a
            href="https://marcreyes.ph/">Marc Anthony Reyes</a>.
    </footer>

    <script src="{% static 'js/jquery-3.4.1.min.js' %}"></script>
    <script src="{% static 'js/popper.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    <script src="{% static 'js/jquery.dataTables.min.js' %}"></script>
    <script src="{% static 'js/dataTables.buttons.min.js' %}"></script>
    <script src="{% static 'js/buttons.print.min.js' %}"></script>
    <script src="{% static 'js/buttons.colVis.min.js' %}"></script>
    <script src="{% static 'js/filterDropDown.min.js' %}"></script>
    <script src="{% static 'js/jszip.min.js' %}"></script>
    <script src="{% static 'js/pdfmake.min.js' %}"></script>
    <script src="{% static 'js/vfs_fonts.js' %}"></script>
    <script src="{% static 'js/buttons.html5.min.js' %}"></script>
    <script src="{% static 'js/buttons.flash.min.js' %}"></script>
    <script>
        $(document).ready(function () {
            let now = new Date();

            let options = {
                weekday: 'long',
                year: 'numeric',
                month: 'short',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            };

            var generatedDate = now.toLocaleString('en-us', options);

            $.extend($.fn.dataTableExt.oStdClasses, {
                "sFilterInput": "form-control",
                "sLengthSelect": "form-control"
            });

            var table = $('#myTable').DataTable({
                language: {
                    search: "_INPUT_",
                    searchPlaceholder: "Search Records"
                },
                filterDropDown: {
                    columns: [
                        {
                            idx: 4
                        },
                        {
                            idx: 13
                        },
                        {
                            idx: 16
                        },
                        {
                            idx: 17
                        }
                    ],
                    bootstrap: true
                },
                'columnDefs': [
                    {
                        'targets': [0, 20, 21, 22],
                        'searchable': false,
                        'orderable': false,
                        'visible': true
                    },
                    {
                        'targets': [2, 3, 7, 8, 9, 10, 11, 12, 14, 15, 19],
                        'visible': false
                    },
                ],
                "bLengthChange": false,
                "iDisplayLength": 5,
                dom: 'Bfrtip',
                buttons: [
                    {
                        extend: 'colvis',
                        text: '<i class="fa fa-eye" style="margin-right: 10px;"></i> Columns',
                        className: 'btn btn-primary',
                        init: function (api, node, config) {
                            $(node).removeClass('dt-button')
                            $(node).removeClass('buttons-collection')
                            $(node).removeClass('buttons-colvis')
                        }
                    },
                    {
                        extend: 'copy',
                        text: '<i class="fa fa-copy" style="margin-right: 10px;"></i> Copy Rows',
                        className: 'btn btn-warning',
                        init: function (api, node, config) {
                            $(node).removeClass('dt-button')
                            $(node).removeClass('buttons-copy')
                            $(node).removeClass('buttons-html5')
                        }
                    },
                    {
                        extend: 'excelHtml5',
                        title: 'Philippine Island Kids International Foundation, Inc.',
                        text: '<i class="fa fa-file-excel-o" style="margin-right: 10px;"></i> Export to Excel (.xlsx)',
                        messageTop: 'Report Generated on ' + generatedDate,
                        exportOptions: {
                            columns: ':not(.notexport)'
                        },
                        className: 'btn btn-success',
                        init: function (api, node, config) {
                            $(node).removeClass('dt-button')
                            $(node).removeClass('buttons-excel')
                            $(node).removeClass('buttons-html5')
                        }

                    },
                    {
                        extend: 'pdfHtml5',
                        title: 'Philippine Island Kids International Foundation, Inc.',
                        messageTop: 'Report Generated on ' + generatedDate,
                        text: '<i class="fa fa-file-pdf-o" style="margin-right: 10px;"></i> Export to PDF (.pdf)',
                        orientation: 'landscape',
                        pageSize: 'LEGAL',
                        exportOptions: {
                            columns: ':not(.notexport)'
                        },
                        className: 'btn btn-danger',
                        init: function (api, node, config) {
                            $(node).removeClass('dt-button')
                            $(node).removeClass('buttons-pdf')
                            $(node).removeClass('buttons-html5')
                        }
                    },
                    {
                        extend: "print",
                        title: 'Philippine Island Kids International Foundation, Inc.',
                        text: '<i class="fa fa-print" style="margin-right: 10px;"></i> Print Visible',
                        messageTop: 'Report Generated on ' + generatedDate,
                        exportOptions: {
                            columns: ':not(.notexport)'
                        },
                        customize: function (win) {

                            var last = null;
                            var current = null;
                            var bod = [];

                            var css = '@page { size: landscape; }',
                                head = win.document.head || win.document.getElementsByTagName('head')[0],
                                style = win.document.createElement('style');

                            style.type = 'text/css';
                            style.media = 'print';

                            if (style.styleSheet) {
                                style.styleSheet.cssText = css;
                            }
                            else {
                                style.appendChild(win.document.createTextNode(css));
                            }

                            head.appendChild(style);
                        },
                        className: 'btn btn-info',
                        init: function (api, node, config) {
                            $(node).removeClass('dt-button')
                            $(node).removeClass('buttons-print')
                        }
                    }
                ]
            });
        });
    </script>
</body>

</html>